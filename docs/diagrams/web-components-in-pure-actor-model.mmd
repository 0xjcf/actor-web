sequenceDiagram
    participant User
    participant DOM
    participant ComponentActor
    participant XState as XState Machine
    participant Template
    participant OtherActor as Backend Actor
    
    User->>DOM: Click button
    DOM->>ComponentActor: send({type: 'DOM_EVENT', payload: {type: 'SAVE'}})
    ComponentActor->>XState: send('SAVE')
    XState->>XState: Transition to 'saving' state
    XState->>ComponentActor: onTransition callback
    ComponentActor->>ComponentActor: send({type: 'RENDER'})
    ComponentActor->>Template: template(state)
    Template->>DOM: Update UI (show loading)
    
    ComponentActor->>OtherActor: ask({type: 'SAVE_DATA', payload: data})
    OtherActor->>ComponentActor: Response {id: 123, success: true}
    
    ComponentActor->>XState: send('SAVE_SUCCESS', {id: 123})
    XState->>XState: Transition to 'saved' state
    ComponentActor->>Template: template(state)
    Template->>DOM: Update UI (show success)